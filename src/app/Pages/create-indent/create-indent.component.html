<div class="wrapper">
    <div class="app-logo">
        <img src="../../../assets/ICICI-Bank-PNG-Icon.png" alt="ICICI_logo">
    </div>
    <div class="title">Create Indent</div>
    <div class="sub-container">
        <div class="loader-placeholder" *ngIf="!isLoaded">
            <img width="100px" height="auto" src="../../../assets/spinner.gif" alt="spinner">
        </div>
        <div *ngIf="!isEditMode && isLoaded" class="form-and-skills-section">
            <div class="form-section">

                <div id="input-container">
                    <img src="../../../assets/idcard.svg" />
                    <input type="text" placeholder="Job role" required [formControl]="jobRole" />
                </div>
                <div id="input-container">
                    <img src="../../../assets/vacancies.svg" />
                    <input type="number" placeholder="Vacancies" required [formControl]="vacancies"/>
                </div>
                <div id="input-container">
                    <img src="../../../assets/department.svg" />
                    <input type="text" placeholder="Department" required [formControl]="department"/>
                </div>
                <div id="input-container">
                    <img src="../../../assets/salary.svg" />
                    <input type="text" placeholder="CTC" required [formControl]="salary"/>
                </div>
                <div id="input-container">
                    <img src="../../../assets/workex.svg" />
                    <input type="number" placeholder="Minimum work experience(years)" required
                    [formControl]="minWorkEx"/>
                </div>
                <div class="location-input">
                    <div class="location-input__icon">
                        <img src="../../../assets/location.svg" alt="LOCATION_ICON">
                    </div>
                    <div class="location-input__dropdown">
                        <mat-form-field appearance="fill">
                            <mat-label>Location</mat-label>
                            <mat-select [formControl]="locations" multiple>
                                <mat-select-trigger>
                                    {{locations.value ? locations.value[0] : ''}}
                                    <span *ngIf="locations.value?.length > 1" class="example-additional-selection">
                                        (+{{locations.value.length - 1}} {{locations.value?.length === 2 ? 'other' :
                                        'others'}})
                                    </span>
                                </mat-select-trigger>
                                <mat-option *ngFor="let locations of locationsList" [value]="locations" required>
                                    {{locations}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <mat-form-field class="reporting-manager" appearance="fill">
                    <mat-label>Reporting Manager</mat-label>
                    <mat-select [formControl]="reportingManager" name="Manager">
                      <mat-option *ngFor="let person of manager" [value]="person">
                        {{person}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
            </div>
            <mat-divider [vertical]="true" class="divider"></mat-divider>

            <div class="skills-section">
                <div class="skills">
                    <div class="skills-section__title">Skills</div>
                    <div class="skills-section__chips">
                        <mat-form-field class="example-chip-list" appearance="fill">
                            <mat-chip-list #chipList aria-label="Fruit selection">
                                <mat-chip *ngFor="let skill of skills" [selectable]="selectable" [removable]="removable"
                                    (removed)="remove(skill)">
                                    {{skill}}
                                    <button matChipRemove *ngIf="removable">
                                        <mat-icon>cancel</mat-icon>
                                    </button>
                                </mat-chip>
                                <input placeholder="Add skill..." #skillInput [formControl]="skillCtrl"
                                    [matAutocomplete]="auto" [matChipInputFor]="chipList"
                                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                    (matChipInputTokenEnd)="add($event)">
                            </mat-chip-list>
                            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                                <mat-option *ngFor="let skill of filteredSkills | async" [value]="skill">
                                    {{skill}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>

                    <div class="due-date">
                        <mat-form-field appearance="fill">
                            <mat-label>Choose a date</mat-label>
                            <input matInput [min]="minDate" [matDatepicker]="picker" (dateInput)="OnDateChange($event.value)" [(ngModel)]="indents.due_date" [formControl]="date">
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                          </mat-form-field>
                       
                    </div>

                </div>

            </div>
        </div>

        <!-- ------------------------------------------------------------------------------
        ------------------------------------------------------------------------------ -->

        <div *ngIf="isEditMode && isLoaded" class="form-and-skills-section">
            <div class="form-section">

                <div id="input-container">
                    <img src="../../../assets/idcard.svg" />
                    <input type="text" placeholder="Job role" required [formControl]="jobRole" />
                </div>
                <div id="input-container">
                    <img src="../../../assets/vacancies.svg" />
                    <input type="number" placeholder="Vacancies" required [formControl]="vacancies" />
                </div>
                <div id="input-container">
                    <img src="../../../assets/department.svg" />
                    <input type="text" placeholder="Department" required [formControl]="department" />
                </div>
                <div id="input-container">
                    <img src="../../../assets/salary.svg" />
                    <input type="text" placeholder="CTC" required [formControl]="salary" />
                </div>
                <div id="input-container">
                    <img src="../../../assets/workex.svg" />
                    <input type="number" placeholder="Minimum work experience(years)" required
                    [formControl]="minWorkEx" />
                </div>
                <div class="location-input">
                    <div class="location-input__icon">
                        <img src="../../../assets/location.svg" alt="LOCATION_ICON">
                    </div>
                    <div class="location-input__dropdown">
                        <mat-form-field appearance="fill">
                            <mat-label>Location</mat-label>
                            <mat-select [formControl]="existingLocations" multiple>
                                <mat-select-trigger>
                                    {{existingLocations.value ? existingLocations.value[0] : ''}}
                                    <span *ngIf="locations.value?.length > 1" class="example-additional-selection">
                                        (+{{existingLocations.value.length - 1}} {{existingLocations.value?.length === 2 ? 'other' :
                                        'others'}})
                                    </span>
                                </mat-select-trigger>
                                <mat-option *ngFor="let locations of locationsList" [value]="locations" required>
                                    {{existingLocations}}</mat-option>
                            </mat-select>
                        </mat-form-field>
                    </div>
                </div>
                <mat-form-field class="reporting-manager" appearance="fill">
                    <mat-label>Reporting Manager</mat-label>
                    <mat-select [formControl]="reportingManager" name="Manager">
                      <mat-option *ngFor="let person of manager" [value]="person">
                        {{person}}
                      </mat-option>
                    </mat-select>
                  </mat-form-field>
            </div>
            <mat-divider [vertical]="true" class="divider"></mat-divider>

            <div class="skills-section">
                <div class="skills">
                    <div class="skills-section__title">Skills</div>
                    <div class="skills-section__chips">
                        <mat-form-field class="example-chip-list" appearance="fill">
                            <mat-chip-list #chipList aria-label="Fruit selection">
                                <mat-chip *ngFor="let skill of existingSkills" [selectable]="selectable" [removable]="removable"
                                    (removed)="remove(skill)">
                                    {{skill}}
                                    <button matChipRemove *ngIf="removable">
                                        <mat-icon>cancel</mat-icon>
                                    </button>
                                </mat-chip>
                                <input placeholder="Add skill..." #skillInput [formControl]="skillCtrl"
                                    [matAutocomplete]="auto" [matChipInputFor]="chipList"
                                    [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
                                    (matChipInputTokenEnd)="add($event)">
                            </mat-chip-list>
                            <mat-autocomplete #auto="matAutocomplete" (optionSelected)="selected($event)">
                                <mat-option *ngFor="let skill of filteredSkills | async" [value]="skill">
                                    {{skill}}
                                </mat-option>
                            </mat-autocomplete>
                        </mat-form-field>
                    </div>

                    <div class="due-date">
                        <mat-form-field appearance="fill">
                            <mat-label>Choose a date</mat-label>
                            <input matInput [min]="minDate" [matDatepicker]="picker" (focus)="picker.open()" (dateInput)="OnDateChange($event.value)" [formControl]="date" [(ngModel)]="existingDate"/>
                            <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
                            <mat-datepicker #picker></mat-datepicker>
                          </mat-form-field>
                       
                    </div>

                </div>

            </div>
        </div>
    </div>

   



    <div class="action-buttons">
    
        <mat-card class="action-buttons__btns" (click)=createIndent()>
            <img src="../../../assets/check.svg" alt="create indent" class="create-indent__btn_img">
            <p>create indent</p>
        </mat-card>
    </div>

    <mat-card class="action_back_btn" (click)="onBack()">
        <img src="../../../assets/back.svg" alt="back" class="create-indent__btn_img">
        <p>Back</p>
    </mat-card>

</div>